# CR和LF

1. 基本定义

• LF（Line Feed，换行符）  

  符号表示为 `
（反斜杠加n），ASCII 码为 0x0A`（十进制 10）。  
  字面含义是“换行”（将光标或打印头移动到当前行的下一行，但不回到行首）。

• CR（Carriage Return，回车符）  

  符号表示为 \r（反斜杠加r），ASCII 码为 0x0D（十进制 13）。  
  字面含义是“回车”（将光标或打印头移动到当前行的行首，但不换行）。

• CRLF（Carriage Return + Line Feed，回车+换行）  

  符号表示为 `\r
（反斜杠加r加n），由 CR 和 LF 组合而成，ASCII 码为 0x0D0A`（连续两个字符）。  

2. 历史背景：打字机的遗产

早期计算机文本处理受机械打字机影响：  
• 打字机打印完一行后，需要两个动作完成“换行”：  

  1. 回车（CR）：将打印头从行尾移动到行首（回到起点）；  
  2. 换行（LF）：将纸张向上滚动一行（移动到下一行的位置）。  
  因此，早期的打字机系统（如 IBM 主机）需要同时发送 CR 和 LF（即 `\r
`）来完成“换行”操作。  

3. 不同系统的选择

随着计算机发展，不同系统对“换行”的实现逐渐分化：  

系统/场景 换行符类型 原因

Unix/Linux/macOS
 LF（`
`）       电子系统无需物理移动打印头，“换行”只需移动光标到下一行（LF 足够）。

Windows
 CRLF（`\r
`）   兼容早期打字机和 DOS 系统的传统（保留 CR+LF 的组合）。

旧版 macOS（OS 9） CR（\r） 曾短暂采用 CR 作为换行符（后被 Unix 风格的 LF 取代）。

4. 实际影响：跨平台问题

不同系统对换行符的差异会导致文本文件兼容性问题，常见场景包括：  
• 文本显示异常：在 Windows 中用记事本打开 Linux 生成的文本文件（仅含 LF），行尾可能无法正确换行（显示为一行）；反之，Linux 读取 Windows 文件（含 CRLF）会看到多余的 ^M 符号（CR 的可视化表示）。  

• 编程解析错误：若程序按固定规则分割行（如按 `

 分割），可能因 CRLF 中的 \r 残留导致错误（例如 Python 中 split('
') 可能得到带 \r` 的行）。  
• 版本控制冲突：Git 等工具可能因换行符差异标记文件为“修改”（需通过 core.autocrlf 配置处理）。  

5. 总结对比表

类型 符号 ASCII 码 典型系统 含义

LF
 `
`   0x0A Unix/Linux/macOS 仅换行（光标到下一行）

CR \r 0x0D 旧版 macOS（OS 9） 仅回车（光标到行首）

CRLF
 `\r
` 0x0D0A Windows、DOS 回车+换行（传统组合）

扩展：如何处理跨平台换行符？

• 文本编辑器：VS Code、Notepad++ 等支持手动切换换行符格式（通常在右下角显示当前格式，可点击修改）。  

• 编程处理：读取文件时指定换行符模式（如 Python 的 open(..., newline='') 自动适配系统）。  

• 版本控制：Git 中通过 git config --global core.autocrlf true 自动转换换行符（提交时转 LF，检出时转 CRLF）。  

简言之，LF 是 Unix 系的“纯换行”，CRLF 是 Windows 对传统的兼容，CR 则是旧版 Mac 的遗留方案。理解它们的差异有助于避免跨平台文本处理的常见问题。