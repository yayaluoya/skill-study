#### TCP/IP 的7层模型
- 应用层 http
- 表示层
- 会话层
- 传输层 tcp/ip
- 网络层
- 数据链路层
- 物理层

IP协议是TCP/IP协议的核心，所有的TCP，UDP，IMCP，IGCP的数据都以IP数据格式传输。

#### IP地址
在数据链路层中我们一般通过MAC地址来识别不同的节点，而在IP层我们也要有一个类似的地址标识，这就是IP地址。
32位IP地址分为网络位和地址位，这样做可以减少路由器中路由表记录的数目，有了网络地址，就可以限定拥有相同网络地址的终端都在同一个范围内，那么路由表只需要维护一条这个网络地址的方向，就可以找到相应的这些终端了。
- A类IP地址: 0.0.0.0~127.0.0.0
- B类IP地址: 128.0.0.1~191.255.0.0
- C类IP地址: 192.168.0.0~239.255.255.0

#### ping命令
ping这个单词源自声纳定位，而这个程序的作用也确实如此，它利用ICMP协议包来侦测另一个主机是否可达。原理是用类型码为0的ICMP发请 求，受到请求的主机则用类型码为8的ICMP回应。
ping程序来计算间隔时间，并计算有多少个包被送达。用户就可以判断网络大致的情况。我们可以看到， ping给出来了传送的时间和TTL的数据。

#### tracert命令
Traceroute是用来侦测主机到目的主机之间所经路由情况的重要工具，也是最便利的工具。

#### TCP/UDP
TCP/UDP都是是传输层协议，但是两者具有不同的特性，同时也具有不同的应用场景，下面以图表的形式对比分析。

TCP协议是一种面向连接的、可靠的、基于字节流的运输层通信协议

![输入图片说明](../images/ec2e805a6ad5eedb10ad44d1f50a85d5_tplv-t2oaga2asx-zoom-in-crop-mark_3024_0_0_0.jpg "在这里输入图片标题")

- 面向报文
  - 面向报文的传输方式是应用层交给UDP多长的报文，UDP就照样发送，即一次发送一个报文。因此，应用程序必须选择合适大小的报文。若报文太长，则IP层需要分片，降低效率。若太短，会是IP太小。
- 面向字节流
    - 面向字节流的话，虽然应用程序和TCP的交互是一次一个数据块（大小不等），但TCP把应用程序看成是一连串的无结构的字节流。TCP有一个缓冲，当应用程序传送的数据块太长，TCP就可以把它划分短一些再传送。
    关于拥塞控制，流量控制，是TCP的重点，后面讲解。
    TCP和UDP协议的一些应用

- 所以说浏览器传文件能给个进度，因为当tcp发送的数据过大时会把数据拆分成很多小块，这样就能看到进度了。

#### TCP连接的建立与终止
a为主动方，b为被动方
- 三次握手
  1. a->b 请求建立连接
  2. b->a 我可以和你建立连接
  3. a->b 我也同意建立连接
  4. 然后连接就建立了
- 四次挥手
  1. a->b 我没有数据要发送了，请求关闭连接
  2. b->a 我同意你关闭请求
  3. b->a 我也请求关闭连接
  4. a->b 你关吧，然后等一会儿没收到b的消息表示b已经关了，然后我也关了。
  5. 然后连接就关闭了

#### 浏览器返回的状态码
1xx表示请求已被接受，但需要后续处理。
2xx请求已成功被服务器接收、理解、并接受。
3xx这类状态码代表需要客户端采取进一步的操作才能完成请求。通常，这些状态码用来重定向， 重定向目标在本次响应的Location头字段中指明。
4xx这类的状态码代表了客户端看起来可能发生了错误，妨碍了服务器的处理。 除非响应的是一个HEAD请求，否则服务器就应该返回一个解释当前错误状况的实体。
5xx这类状态码代表了服务器在处理请求的过程中有错误或者异常状态发生，也有可能是服务器意识到以当前的软硬件资源无法完成对请求的处理。 并且响应消息体中应当给出理由，除非是HEAD请求。
常用状态码：

200 OK 服务器成功处理了请求（这个是我们见到最多的）
301/302 Moved Permanently（重定向）请求的URL已移走。Response中应该包含一个Location URL, 说明资源现在所处的位置
304 Not Modified（未修改）客户的缓存资源是最新的， 要客户端使用缓存
404 Not Found 未找到资源
501 Internal Server Error服务器遇到一个错误，使其无法对请求提供服务

#### Socket
建立Socket连接至少需要一对套接字，其中一个运行于客户端，称为ClientSocket ，另一个运行于服务器端，称为ServerSocket 。
套接字之间的连接过程分为三个步骤：服务器监听，客户端请求，连接确认。
1。服务器监听：服务器端套接字并不定位具体的客户端套接字，而是处于等待连接的状态，实时监控网络状态，等待客户端的连接请求。
2。客户端请求：指客户端的套接字提出连接请求，要连接的目标是服务器端的套接字。为此，客户端的套接字必须首先描述它要连接的服务器的套接字，指出服务器端套接字的地址和端口号，然后就向服务器端套接字提出连接请求。
3。连接确认：当服务器端套接字监听到或者说接收到客户端套接字的连接请求时，就响应客户端套接字的请求，建立一个新的线程，把服务器端套接字的描述发给客户端，一旦客户端确认了此描述，双方就正式建立连接。而服务器端套接字继续处于监听状态，继续接收其他客户端套接字的连接请求。