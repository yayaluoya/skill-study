# 关于tcp/ip的学习

## tcp

### 3次握手，4次挥手

### 网络模型

## ip

## http

### 缓存

HTTP 缓存策略是一种用于提高 Web 性能和减少网络带宽消耗的机制，主要分为强制缓存和协商缓存两种，以下是具体介绍：
强制缓存
原理：强制缓存就是向浏览器缓存查找该请求结果，并根据该结果的缓存规则来决定是否使用该缓存结果的过程。当浏览器再次请求相同资源时，若缓存未失效，则直接使用缓存中的数据，而不会向服务器发送请求。
相关字段
Expires：这是 HTTP/1.0 中的字段，它的值是一个绝对时间的 GMT 格式的时间字符串。例如Expires: Thu, 15 Apr 2025 20:00:00 GMT，表示资源在这个时间之后就会过期，浏览器就不能再使用这个缓存。
Cache-Control：这是 HTTP/1.1 中的字段，优先级高于Expires。常见的值有：
max-age=3600：表示资源的缓存有效期为 3600 秒，即 1 小时。从浏览器收到资源开始计时，在 1 小时内再次请求相同资源，浏览器会直接使用缓存。
public：表示资源可以被任何对象（包括代理服务器等）缓存。
private：表示资源只能被客户端缓存，代理服务器不能缓存。
no-cache：并不是说不缓存，而是需要先向服务器发送请求，验证缓存是否有效。
no-store：表示禁止缓存，每次都要从服务器获取最新资源。
协商缓存
原理：协商缓存就是强制缓存失效后，浏览器携带缓存标识向服务器发起请求，由服务器根据缓存标识决定是否使用缓存的过程。如果服务器判断缓存有效，则返回 304 状态码，告诉浏览器可以使用缓存；如果缓存无效，则返回新的资源和 200 状态码。
相关字段
Last-Modified和If-Modified-Since：Last-Modified是服务器在响应头中返回的资源最后修改时间，例如Last-Modified: Thu, 15 Apr 2025 12:00:00 GMT。浏览器再次请求该资源时，会在请求头中带上If-Modified-Since字段，其值为上次服务器返回的Last-Modified的值。服务器接收到请求后，会对比If-Modified-Since和资源的实际最后修改时间，如果一致，则返回 304 状态码，否则返回新的资源和 200 状态码。
ETag和If-None-Match：ETag是服务器为资源生成的唯一标识，通常是一个哈希值。例如ETag: "567890abcdef"。浏览器再次请求时，会在请求头中带上If-None-Match字段，其值为上次服务器返回的ETag。服务器会对比If-None-Match和当前资源的ETag，如果相同，则返回 304，否则返回新资源和 200 状态码。ETag和If-None-Match的优先级高于Last-Modified和If-Modified-Since。
实际应用中，通常会结合使用强制缓存和协商缓存。比如，可以先设置合理的Cache-Control或Expires来实现强制缓存，提高首次加载后的访问速度；同时，配置Last-Modified或ETag等字段来实现协商缓存，确保在资源更新时能及时获取最新内容。

- 注意 no-cache 和 no-store 的区别

no-cache 不是不缓存，而是每次使用缓存时需要先验证
no-store 才是不缓存

缓存验证流程
客户端发起请求。
检查强缓存：如果 Cache - Control 或 Expires 表明缓存未过期，直接使用本地缓存。
如果强缓存失效，进入协商缓存阶段：
检查 ETag 和 If - None - Match，如果匹配，服务器返回 304 状态码，使用本地缓存。
如果 ETag 不匹配，再检查 Last - Modified 和 If - Modified - Since，如果匹配，服务器返回 304 状态码，使用本地缓存。
如果协商缓存也不通过，服务器返回 200 状态码和新的资源。

### 状态码

### 报文头

### 请求方法

### mime类型

### 跨源资源共享（CORS）

跨域指的是浏览器从一个域名的网页去请求另一个域名的资源时，由于浏览器的同源策略，会导致请求被限制的情况。同源策略是浏览器的一种安全机制，它要求两个 URL 的协议、域名和端口都相同，才允许进行资源共享。例如，http://www.example1.com 访问 http://www.example2.com 的资源就属于跨域请求。

跨源资源共享（CORS，或通俗地译为跨域资源共享）是一种基于 HTTP 头的机制，该机制通过允许服务器标示除了它自己以外的其他源（域、协议或端口，其中有一个不一样就被视为不同源），使得浏览器允许这些源访问加载自己的资源。跨源资源共享还通过一种机制来检查服务器是否会允许要发送的真实请求，该机制通过浏览器发起一个到服务器托管的跨源资源的“预检”请求。在预检中，浏览器发送的头中标示有 HTTP 方法和真实请求中会用到的头。

跨源网络访问
同源策略控制不同源之间的交互，例如在使用 XMLHttpRequest 或 <img> 标签时则会受到同源策略的约束。这些交互通常分为三类：

跨源写操作（Cross-origin writes）一般是被允许的。例如链接、重定向以及表单提交。特定少数的 HTTP 请求需要添加预检请求。
跨源资源嵌入（Cross-origin embedding）一般是被允许的（后面会举例说明）。
跨源读操作（Cross-origin reads）一般是不被允许的，但常可以通过内嵌资源来巧妙的进行读取访问。例如，你可以读取嵌入图片的高度和宽度，调用内嵌脚本的方法，或得知内嵌资源的可用性。
以下是可能嵌入跨源的资源的一些示例：

使用 <script src="…"></script> 标签嵌入的 JavaScript 脚本。语法错误信息只能被同源脚本中捕捉到。
使用 <link rel="stylesheet" href="…"> 标签嵌入的 CSS。由于 CSS 的松散的语法规则，CSS 的跨源需要一个设置正确的 Content-Type 标头。如果样式表是跨源的，且 MIME 类型不正确，资源不以有效的 CSS 结构开始，浏览器会阻止它的加载。
通过 <img> 展示的图片。
通过 <video> 和 <audio> 播放的多媒体资源。
通过 <object> 和 <embed> 嵌入的插件。
通过 @font-face 引入的字体。一些浏览器允许跨源字体（cross-origin fonts），另一些需要同源字体（same-origin fonts）。
通过 <iframe> 载入的任何资源。站点可以使用 X-Frame-Options 标头来阻止这种形式的跨源交互。

如何允许跨源访问
可以使用 CORS 来允许跨源访问。
CORS 是 HTTP 的一部分，它允许服务端来指定哪些主机可以从这个服务端加载资源。

如何阻止跨源访问
阻止跨源写操作，只要检测请求中的一个不可推测的令牌（CSRF token）即可，这个标记被称为跨站请求伪造（CSRF）令牌。你必须使用这个令牌来阻止页面的跨源读操作。
阻止资源的跨源读取，需要保证该资源是不可嵌入的。阻止嵌入行为是必须的，因为嵌入资源通常向其暴露信息。
阻止跨源嵌入，需要确保你的资源不能通过以上列出的可嵌入资源格式使用。浏览器可能不会遵守 Content-Type 头部定义的类型。例如，如果你在 HTML 文档中指定 <script> 标记，则浏览器将尝试将标签内部的 HTML 解析为 JavaScript。当资源不是网站的入口点时，还可以使用 CSRF 令牌来防止嵌入。

总结来说就是同源策略里面加的限制，主要是为了防止在脚本里面恶意访问和攻击其他的源。
同源策略说的就是当两个url的协议或者域名，端口其中一个不一样就视为非同源，访问非同源资源就称为跨源资源访问，
在浏览器中跨源资源访问的方式有很多，比如说嵌入资源（link，script，img，video，audio，iframe，@font-face），链接，重定向，表单，xhr，fetch，等等，其中xhr，fetch，@font-face就加了跨域限制。
就是说不允许它们直接进行跨域资源访问，必须遵循跨域的规范。

## udp
